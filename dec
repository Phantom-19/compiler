import marshal as mc
import zlib, base64, time, sys, os ,datetime, random




def McTony():
    mr = [  '*Faxel*', '      ', '*McTony*', '      ', '*Faxel*', '      ', '*McTony*', '      ', '*Faxel*', '      ', '*Faxel*', '      ', '*McTony*', '      ', '*Faxel*', '      ', '*Faxel*', '      ', '*McTony*', '      ', '*Faxel*', '      ', '*Faxel*', '      ', '*McTony*', '      ', '*Faxel*', '      ', '*Faxel*', '      ', '*Faxel*', '      ', '*McTony*', '      ', '*Faxel*', '      ', '*Faxel*', '      ', '*McTony*\n']
    for o in mr:
        print '\r\x1b[1;97m[\x1b[1;32mâ—â—\x1b[1;97m]   [38;5;221m ' + o,
        sys.stdout.flush()
        time.sleep(0.15)

logo = """\033[38;5;214mâ—â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬à¹‘\033[1;97mâ—â–¬â–¬â–¬â–¬â–¬â–¬à¹‘Û©Û©à¹‘â–¬â–¬â–¬â–¬â–¬â–¬â—â—â–¬â–¬â–¬â–¬â–¬\033[1;32mâ–¬â–¬â–¬â–¬à¹‘Û©Û©à¹‘â–¬â–¬â–¬â–¬â–¬â–¬â—     
\033[38;5;214mâ€¢_  _ ____ \033[1;97m _  _ ____ ____ _  _\033[1;32m ____ ____   _  _â€¢ 
\033[38;5;214mâ€¢|\/| |__/ \033[1;97m |__| |__| |    |_/ \033[1;32m |___ |__/   |_/ â€¢ 
\033[38;5;214mâ€¢|  | |  \ \033[1;97m |  | |  | |___ | \_\033[1;32m |___ |  \ __| \_â€¢ 
\033[38;5;214mâ—â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬à¹‘\033[1;97mâ—â–¬â–¬â–¬â–¬â–¬â–¬à¹‘Û©Û©à¹‘â–¬â–¬â–¬â–¬â–¬â–¬â—â—â–¬â–¬â–¬â–¬â–¬\033[1;32mâ–¬â–¬â–¬â–¬à¹‘Û©Û©à¹‘â–¬â–¬â–¬â–¬â–¬â–¬â—
\033[1;97mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
\033[1;97mâ•‘\033[1;91m[\033[1;93m**\033[1;91m]\033[38;5;95m      Developpeur \033[1;97m:\033[38;5;214m  Faxel           \033[1;91m[\033[1;93m**\033[1;91m]\033[1;97mâ•‘
\033[1;97mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""	
os.system("clear")
print(logo)
print ("""\033[1;96m 
       â•”â•â•—â”¬â”€â”â”¬ â”¬â”Œâ”€â”â”Œâ”¬â”â”Œâ”€â”â”Œâ”€â”â”Œâ”€â”
       â•‘  â”œâ”¬â”˜â””â”¬â”˜â”œâ”€â”˜ â”‚ â”œâ”€â”¤â”‚ â”¬â”œâ”¤ 
       â•šâ•â•â”´â””â”€ â”´ â”´   â”´ â”´ â”´â””â”€â”˜â””â”€â”˜ 
  """)                                           
try:
    dmd = raw_input('\033[1;93mScript a crypter \033[1;91m: \033[1;97m')
    r = mc.dumps(compile(open(dmd, 'rb').read(), '<string>', 'exec'))
except:
    print ("\033[1;91mFichier introuvable ou invalide")
    sys.exit()

s = base64.b16encode(zlib.compress(r))
ecode = "\n# -*- coding: UTF-8 -*-\n'''\033[1;94mFax-Cryptage {}\n\033[1;95mDev \033[1;91m: Faxel \n'''\nimport sys\nimport zlib as zn\nfrom base64 import *\nimport marshal as mc\n\ndef main_code():\n    exec(mc.loads(zn.decompress(b16decode('{}'))))\n\nmain_code()\n".format(time.ctime(), s)
e2code = '\nimport marshal , base64\nexec(marshal.loads(base64.b16decode("{}")))\n'.format(base64.b16encode(mc.dumps(compile(ecode, '<string>', 'exec'))))
e3code = '\nimport marshal , base64\nexec(marshal.loads(base64.b32decode("{}")))\n'.format(base64.b32encode(mc.dumps(compile(e2code, '<string>', 'exec'))))
rmcode = base64.b16encode(mc.dumps(compile(e3code, '<string>', 'exec')))
pycc = base64.b32encode(mc.dumps(compile('\nimport os\nos.system("rm -rf *.pyc")\n', '<string>', 'exec')))
jesus = "\n'''\n\033[1;95mDev \033[1;91m: Faxel\n\033[1;96mCryptage avec Fax-encodage\n'''\nimport marshal , base64 , os\nexec(marshal.loads(base64.b32decode(b'{}')))\nexec(marshal.loads(base64.b16decode('{}')))\n".format(pycc, rmcode)
print '\033[1;94mAncienne taille\033[1;91m :\033[1;93 {} Bytes'.format(len(r))
with open('__main__.py', 'wb') as es:
    es.write(jesus)
os.system('zip {} {}'.format('faxel-' + dmd, '__main__.py'))
print '\033[1;96mNouvelle taille\033[1;91m :\033[1;92m {} Bytes'.format(len(open('faxel-' + dmd, 'rb').read()))
os.system('rm {}'.format('__main__.py'))
print '\033[1;97mGenerer un script crypter \033[1;91m: \033[1;92m{}'.format('faxel-' + dmd)
